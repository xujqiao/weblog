# 做事做完整

> 鸡汤预警：本文会包含一些鸡汤，需要读者注意自身营养，切勿阳盛

> 完整，读音是wán zhěng，汉语词语，意思是具有或保持着应有的部分，没有损坏或残缺[(来源)](https://baike.baidu.com/item/%E5%AE%8C%E6%95%B4/32785)。简而言之,该有的部分都有，没有残缺和疏漏。
>
> 工作中，一项任务涉及的外部、内部，前提和依赖都有解决方案，事情本身的发展也很正常，最终结果呢，在没有意外的情况下，就是预期的结果。
>
> 再细化一点，由于博主工作为编程，完整的完成一项任务可以分为为：
>
> ​    前提的准备，如：数据、接口，都已存在或按一定排期开发；
>
> ​    前提的检查，依赖项是否满足要求，如：是否存在异常数据、接口的返回值是否理解清楚；
>
> ​    过程的开发，能否按既定的排期完成，是否存在前期未评估到的问题和困难，如果存在，需要及时暴露，不可**自我消化**；
>
> ​    结果的展示，结果是否满足预期，如不满足，要分析原因，给出建议和措施。



## 前提的准备

![做事做完整-1](./img/做事做完整-1.jpg)

任何一项任务，都会涉及上图的几个过程：idea -> 计划 -> 实施 -> 结果，中间不乏各种check和理解。

现在的工作，大部分都是建立在他人工作之上或者需要他人合作共同完成。因此，在正式开始实施前，完整的梳理并规划整体的安排尤为重要。

前人的工作形形色色，合作的对象各式各样，而很多事又是结果导向。这个阶段，沟通占据的比例比较大，需要向各方说明事情的缘由以及对对方的需求。沟通的前期，需要尽可能做好准备，尤其是需求，因为对方必然会提出疑惑和挑战，最好先想好可能的问题和回答。通过沟通，让对方觉得，为了达成事情的结果，他得这样做，才能配合你。

单方沟通还好，因为受众单一，当因为其他原因，需要多方同时沟通时，就需要额外注意说话的内容和方式。不同方代表的利益不同，不可为某个目的而影响到第三方。另一方面，多方沟通时，会存在一个相互推诿的过程，尤其对于模棱两可的事情，因此在前期准备时，理由一定要站得住脚，先说服自己，再说服他人。

如果觉得沟通过程心有余而力不足，可以向领导或者专门做沟通的同事请求帮助，如leader或PM。角色决定着能量，也许新人无法让老人配合自己，但如果leader出面，并且新人沟通并没有让老人觉得不舒服的地方，一般都可以完成。

## 前提的检查

![做事做完整2](./img/做事做完整-2.jpg)

需求层出不穷，人的想法无法捉摸，面对新的需求，之前已存在的工具或数据或多或少存在不合适和需要调整的地方。因此，对于任何一台的外部项，在正式开发前，一定需要进行必要的校验和检查。

博主提出两个简单的校验思路，虽然简单，但对于一般的场景都可以解决。

1. 数据的校验

数据无时不在，对于数据的依赖也非常常见，如：统计类，二次开发类等。对于数据类的校验，可以从数据的完整性、异常性两方面入手。

完整性。即检查工作需要的数据是否有提供，毕竟这是工作的基础。比如统计用户一周在app上的使用行为，那app对用户行为的埋点和上报，就是这个统计工作能否完成的前提。因此，就可以先进行简单的查询，查看目标数据的量级和分布，是否满足时间和数量的要求。

异常性。即其中的异常数据。还是上面统计的例子，当发现数据库里有保存满足要求的数据，那就得进一步查看数据的格式，是否存在格式异常或者脏数据。这些数据可能时少数，但都是异常情况，很有可能造成程序的意外中断。现在是大数据时代，任务可能需要运行很久，如果运行到90%，触发异常情况，导致任务退出得重跑，就很麻烦了。

2. 接口的校验

如果说数据是躺在米缸里的大米，那接口就是电饭锅。尽管大米很好，如果电饭锅漏电或者功率不足，依然无法做出美味可口的米饭。（不知道小米电饭锅怎么样🐕）

跟数据类似，同样是关注两方面，一方面是接口正常时的返回内容是否满足要求，另一方面是接口异常返回的处理，比如超时、抖动等。



无论是数据还是接口，由于都是其他方提供的，因此可以要求对方提供详细的文档说明。文档作为开发过程中很重要的依据和证据，需要足够重视。

## 过程的开发

工作过程的开发，永远是工作的核心，前面的准备和最后的结果都围绕于此。即使如此，博主依然认为过程的开发应包含两方面：依赖的开发（校验）和正式的开发

1. 依赖的开发

依赖，即不仅是前文提到的接口和数据，还包括后面正是开发工程中使用到的环境和变量。这里提到的开发，主要为校验。本着不信任的原则，可以在每次任务启动时，先对需要提来的外部环境，做一次统一的校验，保证每次任务启动时，环境都是一致的，以避免运行到最后发现某些环境不满足要求，导致任务中断。

具体来说，对于脚本，可以使用`test`命令检查环境、使用`curl`检查接口、使用`grep`检查数据等。

对于实际的业务，可以检查每次运行时的配置文件是否ok，配置文件中配置的项目是否真的满足要求，如：端口是否被占用、网络是否连接通畅等

2. 正式的开发

正式的开发中，业务逻辑的开发必不可少，然而此部分并不是本文叙述的重点，本文主要关注一些异常情况，如断点、监控。

断点。即任务无端被中断，再次运行要怎么进行。这里提供两种思路，一种是记录业务开发过程中主要的上下文信息，及时保存，再次运行时先读取上下文信息，然后从断点处继续运行；另一种是每次运行都清楚临时文件，保证每次运行都是首次。前一种适用于逻辑较复杂、消耗时间较多的情况，后者则使用逻辑较简单的情况

监控。这里最好使用已有的工具，如公司内部的监控平台等。因为这部分的工作可大可小，而且极其重复性，只要足够通用，那很多业务都可以接入，进行简单的监控。



除了开发过程，还有一点需要明确是，开发过程如果碰到了前期准备阶段没有评估到的问题，需要及时暴露，切记不可自我消化

## 结果的展示

![做事做完整4](./img/做事做完整-4.jpg)

预期的结果，相信会在没有意外的情况下，如期而至